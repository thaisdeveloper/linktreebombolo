<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de PDF com PDF.js</title>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #pdf-viewer {
            width: 100%;
            height: 100vh;
            overflow: scroll;
        }
        canvas {
            border: 1px solid black;
            display: block;
            margin: 10px auto;
        }
        #pdf-controls {
            text-align: center;
            margin-top: 10px;
        }
        button {
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>

<h1 style="text-align:center;">Visualizador de PDF</h1>

<div id="pdf-controls">
    <button id="prev-page">Página Anterior</button>
    <button id="next-page">Próxima Página</button>
    <span>Página: <span id="page-num"></span> de <span id="page-count"></span></span>
</div>

<div id="pdf-viewer">
    <canvas id="pdf-canvas"></canvas>
</div>

<script>
    var url = 'pdfs/seu_arquivo.pdf'; // Caminho para o arquivo PDF
    var pdfDoc = null,
        pageNum = 1,
        pageIsRendering = false,
        pageNumIsPending = null;

    const scale = 1.5; // Zoom no PDF
    const canvas = document.getElementById('pdf-canvas');
    const ctx = canvas.getContext('2d');

    // Carregar PDF
    pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        document.getElementById('page-count').textContent = pdfDoc.numPages;
        renderPage(pageNum);
    });

    // Renderizar página
    function renderPage(num) {
        pageIsRendering = true;

        // Obter página
        pdfDoc.getPage(num).then(function(page) {
            const viewport = page.getViewport({ scale: scale });
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            const renderCtx = {
                canvasContext: ctx,
                viewport: viewport
            };

            const renderTask = page.render(renderCtx);

            // Página renderizada
            renderTask.promise.then(function() {
                pageIsRendering = false;

                if (pageNumIsPending !== null) {
                    renderPage(pageNumIsPending);
                    pageNumIsPending = null;
                }
            });
        });

        // Atualizar contador de páginas
        document.getElementById('page-num').textContent = num;
    }

    // Se já houver uma página em renderização, colocar em espera
    function queueRenderPage(num) {
        if (pageIsRendering) {
            pageNumIsPending = num;
        } else {
            renderPage(num);
        }
    }

    // Mostrar página anterior
    document.getElementById('prev-page').addEventListener('click', function() {
        if (pageNum <= 1) {
            return;
        }
        pageNum--;
        queueRenderPage(pageNum);
    });

    // Mostrar próxima página
    document.getElementById('next-page').addEventListener('click', function() {
        if (pageNum >= pdfDoc.numPages) {
            return;
        }
        pageNum++;
        queueRenderPage(pageNum);
    });
</script>

</body>
</html>
